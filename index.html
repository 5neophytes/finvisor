<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hackathon</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        h1, h2, p {
            color: #333;
            text-align: center;
        }

        #upload-section {
    position: relative;
    margin-top: 100px; /* Adjust this value to place it where you need */
    text-align: center;
    z-index: 10;
}

/* Ensure the upload button stays within the content area */
.upload-button-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 30px;
    position: relative; /* Keeps it on the page and not hidden by the navbar */
    z-index: 1;
}

.upload-button {
    display: block;
    padding: 15px 25px;
    background-color: #bc66fe;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
}

.upload-button:hover {
    background-color: #5a4cad;
}

        .visualization-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 50px auto;
            flex-wrap: wrap;
            width: 80%;
        }

        /* Updated Image card with larger dimensions */
        .image-card {
            position: relative;
            width: 500px;
            height: 600px;
            margin: 40px 20px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
        }

        .image-card:hover {
            transform: translateY(-10px);
        }

        /* Ensure the PNG images fit the card properly */
        .image-card img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 20px;
            background-color: white;
        }

        /* Glass effect on hover */
        .glass-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: all 0.4s ease;
        }

        .image-card:hover .glass-effect {
            display: flex;
        }

        .glass-effect p {
            color: white;
            font-size: 1.3rem;
            padding: 20px;
            background-color: rgba(214, 177, 242,0.6);
            border-radius: 10px;
        }

        /* Back Button */
        .back-button {
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: rgb(214, 177, 242);
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .back-button:hover {
            background-color: #c29ae1;
        }

        /* Hide the visualization section initially */
        #visualization-section {
            display: none;
        }

        .transactions-container {
            margin: 20px auto;
            width: 80%;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
        }

        th {
            background-color: rgb(214, 177, 242);
            color: white;
            text-transform: uppercase;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #ddd;
        }

        .transaction-details {
            text-align: left;
        }

        .amount-cell {
            text-align: right;
            position: relative;
        }

        .amount {
            cursor: pointer;
            display: inline-block;
            padding: 5px 10px;
            border-radius: 8px;
        }

        .amount:hover {
            background-color: #ddd;
        }

        .circle {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 10px;
        }

        .circle.credit {
            background-color: green;
        }

        .circle.debit {
            background-color: red;
        }

        .draggable {
            background-color: #d6b1f2;
            padding: 5px;
            border-radius: 8px;
            cursor: grab;
            display: inline-block;
        }

        /* For hidden transaction rows */
        .hidden-row {
            display: none;
        }

        .expanded {
            display: table-row;
        }

        /* Back Button */
        .back-button {
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: #d6b1f2;
            border: none;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .back-button:hover {
            background-color: #c29ae1;
        }

        .stock-analysis-container {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            margin: 50px auto;
            width: 80%;
        }

        /* Dropdown styling */
        select {
            width: 300px;
            padding: 10px;
            margin: 20px;
            font-size: 1.2rem;
        }

        /* Loading message styling */
        .loading {
            font-size: 1.5rem;
            color: #666;
            display: none; /* Hidden initially */
        }

        /* Animation for loading */
        .loading-animation {
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 80px;
            height: 80px;
            animation: spin 2s linear infinite;
            margin-bottom: 20px;
            position: relative;
            left:47%;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Stock analysis results */
        .analysis {
            margin-top: 20px;
            display: none; /* Hidden initially */
            text-align: center;
        }

        .analysis img {
            width: 500px;
            height: 300px;
            margin: 20px;
        }

        .analysis p {
            font-size: 1.2rem;
            color: #333;
        }

        /* Navbar Styling Fix */
        #nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgb(229, 226, 226);
            color: black;
            padding: 1rem 2rem;
            text-transform: uppercase;
            position: fixed;
            top: 0;
            width: 100%;
            height: 8vh;
            z-index: 11;
        }
        #nav_content {
            display: flex;
            justify-content: space-between;
            gap: 3rem;
        }
        #nav_content h3 {
            position: relative;
            cursor: pointer;
        }
        #nav_content h3::after {
            content: "";
            width: 0;
            height: 2px;
            background: #c29ae1;
            transition: width 0.3s;
            position: absolute;
            left: 0;
            bottom: -5px;
        }
        #nav_content h3:hover::after {
            width: 100%;
        }

        /* Page layout fix */
        #main {
            min-height: 100vh;
            padding-top: 8vh;
            position: relative;
            background-color: rgba(0, 0, 0, 0.35);
            overflow: hidden;
            overflow-y: auto;
        }

        #stock-analysis-section{
          padding-top:100px;
          text-align: center;
          display: none;
        }

    </style>
</head>
<body>
    <div id="nav">
        <h3>5neophytes</h3>
        <div id="nav_content">
            <h3>Home</h3>
            <h3>Contact Us</h3>
            <h3>About</h3>
        </div>
    </div>
    <div id="cursor"></div>
    <div id="cursor-blur"></div>
    <video id="background-video" src="8284354-hd_1080_1920_30fps.mp4" infinite autoplay loop muted></video>


    <!-- Main Content -->
    <div id="main">
        <div id="page1">
            <h1>FinVisor</h1>
            <h2>Financial Management made Easy for Students</h2>
            <p>
                FinVisor is a student-friendly financial platform designed to help you manage your finances efficiently. Whether it's tracking your latest transactions, visualizing your spending habits, or providing personalized financial advice, FinVisor is your go-to app. We also offer a stock analysis feature to give you instant updates on the latest market trends, making smart financial decisions easier than ever.
            </p>
        </div>

        <div id="page2">
            <div id="features">
                <h1>Features</h1>
                <p>Explore the best features of FinVisor! Our platform is designed to empower students with the financial tools they need for better money management.</p>
            </div>

            <div id="upload-section">
              <div class="upload-button-wrapper">
                  <button class="upload-button" onclick="triggerUpload()">Upload PDF</button>
                  <input type="file" id="pdf-upload" accept="application/pdf" style="display:none" />
              </div>
          </div>

            <div class="features-container">
                <div class="left-section">
                    <p style="font-size:1.25rem"><strong>Benefits</strong></p>
                    <div class="info-box">
                        <p><strong>Satisfactory</strong><br>Experience</p>
                        <p><strong>5.0</strong><br>Trust pilot</p>
                    </div>
                    <p class="see-more">See More</p>
                </div>

                <div class="right-section">
                    <h1>Best features provided by us</h1>
                    <p class="description">
                        Rated 5.0 on Trust Pilot, FinVisor offers a smooth and efficient user experience.
                    </p>
                    
                    <div class="features-grid">
                        <div class="feature-card purple" data-feature="transactions">
                            <h3>Transactions</h3>
                            <p>Keep track of your latest transactions in real-time. FinVisor helps you stay on top of your spending habits and ensures you're always informed about your financial activities.
                            </p>
                        </div>
                        <div class="feature-card" data-feature="visualization">
                            <h3>Visualization</h3>
                            <p>Visualize your financial data with easy-to-understand graphs and charts. Our app analyzes patterns in your spending, allowing you to make more informed financial decisions.
                            </p>
                        </div>
                        <div class="feature-card" data-feature="chatbot">
                            <h3>Chatbot</h3>
                            <p>Need advice on your personal finances? Our intelligent chatbot is available to give you personalized tips and general financial advice whenever you need it.
                            </p>
                        </div>s
                        <div class="feature-card" data-feature="stock-analysis">
                            <h3>Stock Analysis</h3>
                            <p>Get instant updates on stock trends. Whether you're a seasoned investor or just starting, FinVisor helps you stay informed on the latest market movements.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Individual Feature Sections -->
    <div id="transactions-section" class="feature-section" style="display: none;">
        <h1>Transactions</h1>
        <p>We provide secure and fast transaction services for all your banking needs.</p>

        <div class="transactions-container">
            <!-- Transactions Table -->
            <table id="transactions-table">
                <thead>
                    <tr>
                        <th>Transaction Details</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody id="transaction-rows">
                    <!-- Dynamic content will be injected here -->
                </tbody>
            </table>
        </div>
        <button class="back-button">Back to Main Page</button>
    </div>

    <div id="visualization-section" class="feature-section">
      <h1 style="margin-bottom: 15px;font-weight: 900;">Data Visualization</h1>
      <p>Hover over the images to learn more about our data visualization tools.</p>

      <div class="visualization-container" id="visualization-container">
          <!-- Images will be dynamically injected here -->
      </div>
      <button class="back-button">Back to Main Page</button>
  </div>

  <div id="chatbot-section" class="feature-section" style="display: none;">
    <h1>Chatbot</h1>
    <p>Our AI-powered chatbot is available 24/7 to assist you with any queries.</p>

    <!-- Chatbot Input Section -->
    <div class="chatbot-input-container">
        <h2>How can we help you today?</h2>
        <input type="text" id="user-query" placeholder="Type your query here..." class="chatbot-input">
        <button class="submit-query-button" onclick="submitQuery()">Submit</button>

        <!-- Response message container that will be shown after submission -->
        <div id="chatbot-response" class="response-message" style="display:none;">
            <p>Services will be available soon.</p>
        </div>
    </div>

    <button class="back-button">Back to Main Page</button>
</div>



<div id="stock-analysis-section" class="stock-analysis-container">
    <h1>Stock Analysis</h1>
    <p>Select a stock to analyze:</p>
  
    <!-- Dropdown for selecting stock -->
    <select id="stock-select">
        <option value="" disabled selected>Select a stock</option>
        <option value="AAPL">Apple (AAPL)</option>
        <option value="GOOGL">Google (GOOGL)</option>
        <option value="AMZN">Amazon (AMZN)</option>
        <option value="TSLA">Tesla (TSLA)</option>
    </select>
  
    <!-- Loading message -->
    <div id="loading-message" class="loading">
        <div class="loading-animation"></div>
        Analyzing...
    </div>
  
    <!-- Stock Analysis Results -->
    <div id="stock-analysis-result" class="analysis" style="display: none;">
        <h2>Stock Analysis for <span id="stock-name"></span></h2>
  
        <div>
            <img id="candlestick-chart" src="" alt="Candlestick Chart">
            <div>
                <p>Candlestick Chart</p>
            </div>
        </div>
  
        <div>
            <img id="line-chart" src="" alt="Line Chart">
            <div>
                <p>Line Chart</p>
            </div>
        </div>
  
        <div id="stock-advice" class="stock-advice"></div>
    </div>
    <button class="back-button">Back to Main Page</button>
  </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <script>
    var crsr = document.querySelector("#cursor");
    var blur = document.querySelector("#cursor-blur");
    var video = document.querySelector("#background-video");

    document.addEventListener("mousemove", function (dets) {
      crsr.style.left = dets.x + "px";
      crsr.style.top = dets.y + "px";
      blur.style.left = dets.x - 250 + "px";
      blur.style.top = dets.y - 250 + "px";
    });

    function triggerUpload() {
            document.getElementById('pdf-upload').click();
        }

        document.getElementById('pdf-upload').addEventListener('change', function() {
            document.getElementById('loading-message').style.display = 'block';
            setTimeout(function() {
                document.getElementById('loading-message').style.display ='none';
                alert('PDF uploaded successfully!');
            }, 1000); // Simulating a 10 second upload
        });

    // Handle feature card clicks
    document.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('click', function () {
            const feature = this.getAttribute('data-feature');
            showFeatureDetail(feature);
        });
    });

    // Function to show the detailed feature view
    function showFeatureDetail(feature) {
        // Hide main content and background elements
        document.getElementById('main').style.display = 'none';
        crsr.style.display = 'none';
        blur.style.display = 'none';
        video.style.display = 'none';

        // Hide all feature sections first
        document.querySelectorAll('.feature-section').forEach(section => section.style.display = 'none');

        // Show the corresponding section based on which card was clicked
        switch (feature) {
            case 'transactions':
                document.getElementById('transactions-section').style.display = 'block';
                initializeTransactions(); // Initialize transactions when the section is clicked
                break;
            case 'visualization':
                document.getElementById('visualization-section').style.display = 'block';
                break;
            case 'chatbot':
                document.getElementById('chatbot-section').style.display = 'block';
                break;
            case 'stock-analysis':
                document.getElementById('stock-analysis-section').style.display = 'block';
                break;
        }
    }
    

    // Handle back button clicks
    document.querySelectorAll('.back-button').forEach(button => {
    button.addEventListener('click', function () {
        // Hide all feature sections
        document.querySelectorAll('.feature-section').forEach(section => section.style.display = 'none');

        // Show the main page and reset content visibility
        document.getElementById('main').style.display = 'block';
        crsr.style.display = 'block';
        blur.style.display = 'block';
        video.style.display = 'block';

        // Ensure stock-analysis-section is hidden
        document.getElementById('stock-analysis-section').style.display = 'none';

        // Optionally hide any other feature sections that may still be visible
        document.querySelectorAll('.feature-section').forEach(section => {
            section.style.display = 'none';
        });
    });
});

    // GSAP ScrollTrigger animations
    gsap.to("#nav", {
        backgroundColor: "lightgrey",
        duration: 0.5,
        height: "100px",
        scrollTrigger: {
        trigger: "#nav",
        scroller: "body",
        start: "top -10%",
        end: "top -11%",
        scrub: 1,
        },
    });

    gsap.to("#main", {
        backgroundColor: "rgb(238, 236, 236)",
        scrollTrigger: {
          trigger: "#main",
          scroller: "body",
          start: "top -10%",
          end: "top -11%",
          scrub: 2,
        },
    });

    const imageData = [
            { src: 'assets/image1.png', description: 'This tool provides insights into your spending patterns using a bar chart.' },
            { src: 'assets/image2.png', description: 'This visualization shows your income versus expenses over time with a line graph.' },
            { src: 'assets/image3.png', description: 'A pie chart representation of your monthly budget allocations across different categories.' },
            { src: 'assets/image4.png', description: 'Heatmap of your daily financial activities, showing the peaks of your transactions.' },
            { src: 'assets/image5.png', description: 'A scatter plot showing the correlation between your savings and investments.' }
        ];

        // Reference to the container where images will be added
        const visualizationContainer = document.getElementById('visualization-container');

        // Dynamically create image cards and append them to the container
        imageData.forEach((data, index) => {
            // Create the image card div
            const card = document.createElement('div');
            card.classList.add('image-card');

            // Add the image element
            const img = document.createElement('img');
            img.src = data.src;
            img.alt = `Data Visualization ${index + 1}`;
            card.appendChild(img);

            // Create the glass-effect div
            const glassEffect = document.createElement('div');
            glassEffect.classList.add('glass-effect');
            
            // Add the description
            const description = document.createElement('p');
            description.innerText = data.description;
            glassEffect.appendChild(description);

            // Append the glass effect to the card
            card.appendChild(glassEffect);

            // Append the card to the container
            visualizationContainer.appendChild(card);
        });

    // Transaction Data with Date and Time
    const transactions = [
    { name: 'Kartik Bajaj', amount: -66600.0, date: '24 Sep', time: '1:46 AM' },
{ name: 'Kartik Bajaj', amount: -1.0, date: '24 Sep', time: '1:46 AM' },
{ name: 'Airtel Mobile', amount: -22.0, date: '23 Sep', time: '10:57 PM' },
{ name: 'All Mart', amount: -305.0, date: '23 Sep', time: '7:45 PM' },
{ name: 'Ilaiyaraja Lakshmanan', amount: -150.0, date: '23 Sep', time: '7:36 PM' },
{ name: 'Ilaiyaraja Lakshmanan', amount: -80.0, date: '23 Sep', time: '7:18 PM' },
{ name: 'Maggi Spot', amount: -386.0, date: '23 Sep', time: '6:47 PM' },
{ name: 'All Maart', amount: -40.0, date: '23 Sep', time: '4:01 PM' },
{ name: 'Enzo', amount: -180.0, date: '23 Sep', time: '10:02 AM' },
{ name: 'Pushkar Iyer', amount: 8426.0, date: '22 Sep', time: '9:56 PM' },
{ name: 'Mr Kesavan S', amount: -350.0, date: '22 Sep', time: '6:44 PM' },
{ name: 'Imthiyas K', amount: -135.0, date: '22 Sep', time: '6:06 PM' },
{ name: 'Pushkar Iyer', amount: -200.0, date: '22 Sep', time: '5:58 PM' },
{ name: 'All Maart', amount: -30.0, date: '22 Sep', time: '3:06 PM' },
{ name: 'Vi 8860390194', amount: -22.0, date: '22 Sep', time: '1:59 PM' },
{ name: 'Enzo Shop', amount: -380.0, date: '22 Sep', time: '9:34 AM' },
{ name: 'Manisha Varshney', amount: 4000.0, date: '21 Sep', time: '10:45 PM' },
{ name: 'Coursera Inc', amount: -3518.0, date: '21 Sep', time: '10:45 PM' },
{ name: 'Satvik Nanda', amount: 150.0, date: '21 Sep', time: '9:03 PM' },
{ name: 'Romika Gupta', amount: 150.0, date: '21 Sep', time: '9:02 PM' },
{ name: 'Airtel Mobile', amount: -22.0, date: '21 Sep', time: '9:01 PM' },
{ name: 'Lava Cakes', amount: -940.0, date: '21 Sep', time: '7:42 PM' },
{ name: 'Priyadharshini Manokaran', amount: -74.0, date: '21 Sep', time: '7:26 PM' },
{ name: 'Sivamoorthy P', amount: -250.0, date: '21 Sep', time: '7:23 PM' },
{ name: 'Mr CManimaran', amount: -250.0, date: '21 Sep', time: '5:46 PM' },
{ name: 'G Sambath', amount: -145.0, date: '21 Sep', time: '5:14 PM' },
{ name: 'Siva R', amount: -300.0, date: '21 Sep', time: '4:03 PM' },
{ name: 'Enzo', amount: -110.0, date: '21 Sep', time: '3:26 PM' },
{ name: 'Pankaj Kumar Bhadana', amount: -100.0, date: '21 Sep', time: '2:20 PM' },
{ name: 'Rhema Transport', amount: -60.0, date: '20 Sep', time: '8:46 PM' },
{ name: 'Ulzavar Urpathiaarlar Kuzhi', amount: -70.0, date: '20 Sep', time: '8:10 PM' },
{ name: 'Asif Khan', amount: -100.0, date: '20 Sep', time: '7:45 PM' },
{ name: 'Maggi Spot', amount: -55.0, date: '20 Sep', time: '4:34 PM' },
{ name: 'Enzo', amount: -120.0, date: '20 Sep', time: '11:27 AM' },
{ name: 'Sunsrai Mart', amount: -160.0, date: '19 Sep', time: '11:51 PM' },
{ name: 'Pankaj Kumar Bhadana', amount: -250.0, date: '19 Sep', time: '11:23 PM' },
{ name: 'Rhema Transport', amount: -60.0, date: '19 Sep', time: '8:38 PM' },
{ name: 'Maggi Spot', amount: -270.0, date: '19 Sep', time: '6:27 PM' },
{ name: 'Mr Balakrishnan Kumaravel', amount: -95.0, date: '19 Sep', time: '5:41 PM' },
{ name: 'All Maart', amount: -20.0, date: '19 Sep', time: '3:17 PM' },
{ name: 'Pankaj Kumar Bhadana', amount: -330.0, date: '19 Sep', time: '1:48 PM' },
{ name: 'Rhema Transport', amount: -60.0, date: '18 Sep', time: '5:48 PM' },
{ name: 'I Afrose Khan', amount: -30.0, date: '18 Sep', time: '5:22 PM' },
{ name: 'Asif Khan', amount: -100.0, date: '18 Sep', time: '5:22 PM' },
{ name: 'Enzo Shop', amount: -60.0, date: '18 Sep', time: '12:14 PM' },
{ name: 'Nescafe Wh', amount: -79.0, date: '18 Sep', time: '12:04 PM' },
{ name: 'Selvarani S', amount: -70.0, date: '18 Sep', time: '10:49 AM' },
{ name: 'Vi 8860390194', amount: -22.0, date: '18 Sep', time: '10:25 AM' },
{ name: 'Mr A Periyar', amount: -300.0, date: '17 Sep', time: '9:00 PM' },
{ name: 'Wasi Ahmad', amount: -1000.0, date: '17 Sep', time: '8:34 PM' },
{ name: 'Maggi Spot', amount: -120.0, date: '17 Sep', time: '6:15 PM' },
{ name: 'Enzo', amount: -300.0, date: '17 Sep', time: '1:10 PM' },
{ name: 'All Maart', amount: -90.0, date: '16 Sep', time: '10:05 AM' },
{ name: 'Rhema Transport', amount: -40.0, date: '16 Sep', time: '10:03 AM' },
{ name: 'Manisha Varshney', amount: 8000.0, date: '15 Sep', time: '9:17 PM' },
{ name: 'Kumarasan M', amount: -68.0, date: '15 Sep', time: '8:50 PM' },
{ name: 'Mc Donalds', amount: -545.94, date: '15 Sep', time: '7:44 PM' },
{ name: 'Mc Donalds', amount: -178.92, date: '15 Sep', time: '7:44 PM' },
{ name: 'Mc Donalds', amount: -99.0, date: '15 Sep', time: '7:43 PM' },
{ name: 'Mc Donalds', amount: -706.12, date: '15 Sep', time: '7:43 PM' },
{ name: 'Enzo', amount: -175.0, date: '14 Sep', time: '7:30 PM' },
{ name: 'Maggi Spot', amount: -15.0, date: '14 Sep', time: '7:06 PM' },
{ name: 'Maggi Spot', amount: -102.0, date: '14 Sep', time: '7:01 PM' },
{ name: 'Ilaiyaraja Lakshmanan', amount: -100.0, date: '14 Sep', time: '6:57 PM' },
{ name: 'Sunsrai Mart', amount: -120.0, date: '14 Sep', time: '4:41 PM' },
{ name: 'Sunsrai Mart', amount: -130.}
    ];
    
    // Group transactions by name and aggregate amounts
    function groupTransactions(transactions) {
        const grouped = {};
        transactions.forEach(tx => {
            if (!grouped[tx.name]) {
                grouped[tx.name] = {
                    total: 0,
                    transactions: []
                };
            }
            grouped[tx.name].total += tx.amount;
            grouped[tx.name].transactions.push(tx);
        });
        return grouped;
    }

    // Initialize the transactions table
    function initializeTransactions() {
        const groupedTransactions = groupTransactions(transactions);
        const transactionRows = document.getElementById('transaction-rows');
        transactionRows.innerHTML = ''; // Clear the table

        Object.keys(groupedTransactions).forEach((name, index) => {
            const group = groupedTransactions[name];
            
            // Create the summary row
            const summaryRow = document.createElement('tr');
            summaryRow.classList.add('summary-row');
            summaryRow.setAttribute('data-index', index);
            
            // Transaction Details Cell
            const detailsCell = document.createElement('td');
            detailsCell.innerText = name;
            detailsCell.classList.add('transaction-details');
            detailsCell.style.cursor = 'pointer';
            summaryRow.appendChild(detailsCell);
            
            // Amount Cell with total
            const amountCell = document.createElement('td');
            amountCell.classList.add('amount-cell');
            const circle = document.createElement('span');
            circle.classList.add('circle', group.total > 0 ? 'credit' : 'debit');
            amountCell.appendChild(circle);
            const amountSpan = document.createElement('span');
            amountSpan.innerText = '₹' + group.total.toFixed(2);
            amountSpan.classList.add('amount');
            amountCell.appendChild(amountSpan);
            summaryRow.appendChild(amountCell);
            transactionRows.appendChild(summaryRow);

            // Create rows for each individual transaction (hidden initially)
            group.transactions.forEach((transaction, i) => {
                const transactionRow = document.createElement('tr');
                transactionRow.classList.add('hidden-row');
                transactionRow.setAttribute('data-parent-index', index);

                // Transaction Details (now includes date and time)
                const transactionDetailsCell = document.createElement('td');
                transactionDetailsCell.innerText = `${transaction.date} ${transaction.time} - ${transaction.name}`;
                transactionRow.appendChild(transactionDetailsCell);

                // Amount
                const transactionAmountCell = document.createElement('td');
                transactionAmountCell.classList.add('amount-cell');
                const txCircle = document.createElement('span');
                txCircle.classList.add('circle', transaction.amount > 0 ? 'credit' : 'debit');
                transactionAmountCell.appendChild(txCircle);
                const txAmountSpan = document.createElement('span');
                txAmountSpan.innerText = '₹' + transaction.amount.toFixed(2);
                transactionAmountCell.appendChild(txAmountSpan);
                transactionRow.appendChild(transactionAmountCell);

                transactionRows.appendChild(transactionRow);
            });

           

            // Add click event to toggle visibility of the individual transactions
            detailsCell.addEventListener('click', function () {
                const hiddenRows = document.querySelectorAll(`.hidden-row[data-parent-index="${index}"]`);
                hiddenRows.forEach(row => {
                    row.classList.toggle('expanded');
                });
            });
        });

    }


    function submitQuery() {
        const userQuery = document.getElementById('user-query').value;
        const responseDiv = document.getElementById('chatbot-response');

        if (userQuery.trim() !== "") {
            responseDiv.style.display = 'block'; // Show the response message div
            document.getElementById('user-query').value = ''; // Clear the input field after submission
        } else {
            responseDiv.style.display = 'none'; // Hide the response if the input is empty
        }
    }

    const stockData = {
        AAPL: {
                name: "Apple (AAPL)",
                candlestickChart: "aapl_candlestick_chart.png",
                lineChart: "aapl_line_chart.png",
                advice: `
                Stock Summary:  
                - Last 5 closing prices: [228.87, 228.2, 226.47, 227.37, 226.37]  
                - Latest closing price: 226.37  
                - 20-day moving average: 223.6065  
                - 50-day moving average: 222.0468  
                - Average trading volume: 62,981,752.28  

                AI Advice:  
                Key Metrics:  
                - Last 5 closing prices: [228.87, 228.2, 226.47, 227.37, 226.37]  
                - Latest closing price: 226.37  
                - 20-day moving average: 223.6065  
                - 50-day moving average: 222.0468  
                - Average trading volume: 62,981,752.28  
    
                Price and Moving Averages:  
                The latest closing price (226.37) is higher than both the 20-day and the 50-day moving averages, which suggests an upward trend. However, the last five closing prices indicate a little volatility, as the closing price appears to fluctuate within a range of about 2 dollars.  
    
                Volume:  
                The average trading volume indicates the general liquidity of this stock, which is fairly consistent. High trading volume often means the stock market is more actively trading this stock.  
    
                Short-term Trend:  
                The closing prices for the last five days show some volatility but overall, the closing price is trending above the 20-day and 50-day moving averages. This might signal a short-term positive trend.  
    
                Buy Advice:  
                As a student, it is important to consider your risk tolerance, financial goals, and investment timeframe. Given the current rising short-term trend, it could be a good opportunity to buy the stock. However, be mindful that the slight volatility could lead to some fluctuations in the stock price. It would be advised to buy in small increments initially; start by investing an amount that you can afford to lose.  
    
                Hold or Sell Advice:  
                If you currently own the stock and it is not causing too much of a drawdown on your portfolio, it might be a good idea to hold due to the upward trend. If the stock begins to consistently close below the 50-day moving average, it may be a signal to sell.  
    
                Other Factors:  
                Consider other market conditions and the company's fundamentals. For instance, has the company recently reported strong financial results? Or is the broader market in an uptrend or downtrend? This information can help provide context for the stock's recent performance and potential future direction.  
    
                Conclusion:  
                Given the short-term upward trend, it might be a good time to buy the stock for those who can tolerate the risk. However, since the market could be volatile, it is advised to start small and closely monitor the stock's performance against its moving averages. Remember the mantra: "buy low, sell high." For existing stockholders, it might be wise to hold and monitor carefully for any consistent below-average performance. It is crucial to consider a blend of both technical and fundamental analysis for decisions.

                `
            },
            GOOGL: {
                name: "Google (GOOGL)",
                candlestickChart: "googl_candlestick_chart.png",
                lineChart: "googl_line_chart.png",
                advice: `
                Stock Summary:
- Last 5 closing prices: [162.14, 163.59, 161.85, 162.29, 161.49]
- Latest closing price: 161.49
- 20-day moving average: 157.9605
- 50-day moving average: 163.759
- Average trading volume: 24932299.64

AI Advice:
- Key Metrics:
  - Last 5 Closing Prices: [162.14, 163.59, 161.85, 162.29, 161.49]
  - Latest Closing Price: 161.49
  - 20-day Moving Average: 157.9605
  - 50-day Moving Average: 163.759
  - Average Trading Volume: 24932299.64

- Price and Moving Averages:
  The latest closing price of the stock is 161.49, comfortably above the 20-day moving average of 157.9605. This suggests that the stock’s price has been trending up in the short-term. However, its price is below the 50-day moving average of 163.759, indicating a potential downtrend in the longer-term view.

- Volume:
  The trading volume of nearly 25 million indicates a high level of interest and liquidity in the stock. Therefore, it would be relatively easy to buy or sell the stock without significantly affecting its price.

- Short-term Trend:
  Over the last five trading days, the closing prices have been volatile with a very slight downward trend, from 162.14 to 161.49. Although there is no definitive trend in this short snapshot, the stock has shown the ability to bounce back from small declines.

- Buy Advice:
  Considering the current stock price is above the 20-day moving average and given the high trading volume, it could be a good time to purchase a portion of the stock depending on the student's budget and risk tolerance. However, the student may want to wait for a more definitive upward trend to form before investing heavily.

- Hold or Sell Advice:
  If the student currently owns the stock, given that the price is steady and the short-term moving average is trending up, the advice would be to hold.

- Other Factors:
  Other factors that should be considered are the stock's fundamentals, such as earnings growth and price-earnings ratio. News and events affecting the company and the industry should also be monitored closely.

- Conclusion:
  Based on the key metrics, moving averages, price, and volume, the stock is more likely to be a buy for the short-term, keeping the investment amount in check as per one's risk tolerance. In case of already owning the stock, it would be advisable to hold on to it. However, constant vigilance on the market conditions and evolving news about the company need to be watched as they can have substantial impact on the stock's performance.

                `
            },
            AMZN: {
                name: "Amazon (AMZN)",
                candlestickChart: "amzn_candlestick_chart.png",
                lineChart: "amzn_line_chart.png",
                advice: `
                Stock Summary:
- Last 5 closing prices: [189.87, 191.6, 193.88, 193.96, 192.53]
- Latest closing price: 192.53
- 20-day moving average: 182.664
- 50-day moving average: 178.8666
- Average trading volume: 40462890.69

AI Advice:
- Key Metrics:
  - Last 5 Closing Prices: [189.87, 191.6, 193.88, 193.96, 192.53]
  - Latest Closing Price: 192.53
  - 20-day Moving Average: 182.664
  - 50-day Moving Average: 178.8666
  - Average Trading Volume: 40462890.69

- Price and Moving Averages:
  The latest closing price is above both the 20-day and 50-day moving averages, which is generally a bullish signal as it implies a positive trend. The closer the latest closing price to the moving averages, the stronger the signal. In this case, the latest closing price is significantly above both averages.

- Volume:
  The average trading volume is substantial, indicating that there is good liquidity in this stock. A high volume means the stock can be bought or sold without affecting the stock's price significantly.

- Short-term Trend:
  The last 5 closing prices show an overall upward trend, indicating a positive short-term trend. However, the last closing price is slightly lower than the second last closing price, so there's a short-term pullback, which may signal a brief consolidation before the continuation of the upward trend.

- Buy Advice:
  Cautiously consider buying this stock given its positive trend and good liquidity. As a student, always invest only what you can afford to lose.

- Hold or Sell Advice:
  If you currently own the stock, consider holding your position since the stock is in a positive trend. But keep in mind, the latest slight decrease can be the start of a downturn. Therefore, closely monitor the stock's performance and set a stop-loss order at your comfort level to limit potential losses.

- Other Factors:
  Other factors to consider would include current market conditions and the specific company’s fundamentals. You should understand the company's business model, revenue, net income, and potential growth. Moreover, considering the current market situation and potential external influences are crucial as they might affect the stock price.

- Conclusion:
  The stock is in an upward trend and has good liquidity, making it a potential buy for someone who can tolerate some risk. But always remember to invest only what you can afford to lose. For those who already own the stock, holding is presently a good option due to the positive trend. However, the slight decline in the latest closing price should be noted for any changes in the trend direction. Conducting further research on the company and market conditions is highly recommended.
`
            },
            TSLA: {
                name: "Tesla (TSLA)",
                candlestickChart: "tsla_candlestick_chart.png",
                lineChart: "tsla_line_chart.png",
                advice: `
                Stock Summary:
- Last 5 closing prices: [243.92, 238.25, 250.00, 254.27, 257.02]
- Latest closing price: 257.02
- 20-day moving average: 227.6515
- 50-day moving average: 222.0556
- Average trading volume: 88,489,256.09

AI Advice:
- Key Metrics:
  - Last 5 Closing Prices: [243.92, 238.25, 250.00, 254.27, 257.02]
  - Latest Closing Price: 257.02
  - 20-day Moving Average: 227.6515
  - 50-day Moving Average: 222.0556
  - Average Trading Volume: 88,489,256.09

- Price and Moving Averages:
  The latest closing price of the stock is above both the 20-day and 50-day moving averages, indicating a positive trend. The stock appears to be on an uptrend in the short term. With the 20-day average also higher than the 50-day average, this suggests that recent price action is more bullish.

- Volume:
  The average trading volume is significant, indicating that the stock is highly liquid. High trading volumes often suggest strong investor interest and can lead to more predictable price movements. This also indicates the potential for strong price momentum.

- Short-term Trend:
  If we look at the last five closing prices, it indicates a rising trend. Even though there was a slight drop on the second day, the overall trend is still upward, and the latest closing price is the highest amongst the last five days, inferring a short-term bullish trend.

- Buy Advice:
  Given that the stock is consistently closing at prices higher than both moving averages and the recent bullish trend, it may be a good opportunity to buy the stock. For a student who might have limited resources, it's prudent not to invest all the funds in a single stock. Allocating around 10-20% of available investments to this stock could be considered, and it would be beneficial to enter when the price dips slightly.

- Hold or Sell Advice:
  For those who already hold the stock, it would be a good strategy to hold considering the upward trend. If the latest price goes below the 20-day moving average, it may be a good time to reassess the position.

- Other Factors:
  While the technicals present a positive picture, it's also important to factor in any fundamental data - the company's revenues, income, and debt levels, future prospects. Additionally, the broader market trend and investor sentiment should also be considered before making an investment.

- Conclusion:
  Based on these metrics and the current positive short-term trend, it's an opportune moment to "Buy" for new investors (with a recommended allocation of 10-20% of one's portfolio) and "Hold" for those who already have the stock in their portfolio. Remember to always keep a close eye on both market trends and fundamental analysis for a holistic decision.
`
            }
    };

    // Function to update the stock analysis result
    function updateStockAnalysis(stock) {
        const selectedStock = stockData[stock];
        document.getElementById('stock-name').innerText = selectedStock.name;
        document.getElementById('candlestick-chart').src = selectedStock.candlestickChart;
        document.getElementById('line-chart').src = selectedStock.lineChart;
        document.getElementById('stock-advice').innerText = selectedStock.advice;
        document.getElementById('stock-analysis-result').style.display = 'block'; // Show the result
    }

    // Event listener for stock selection
    document.getElementById('stock-select').addEventListener('change', function () {
        const stock = this.value;
        document.getElementById('loading-message').style.display = 'block'; // Show loading
        setTimeout(function () {
            document.getElementById('loading-message').style.display = 'none'; // Hide loading after 1.5s
            updateStockAnalysis(stock); // Show analysis after loading
        }, 1500); // Simulating API delay of 1.5 seconds
    });

    // Initialize the transactions when the document loads
    window.onload = function() {
        initializeTransactions();
    };
    </script>




    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    html, body {
        height: 100vh;
        width: 100vw;
    }
    
    #cursor {
        height: 20px;
        width: 20px;
        background-color: rgb(214, 177, 242);
        border-radius: 50%;
        position: fixed;
        z-index: 99;
        transition: all linear 0.1s;
    }
    #cursor-blur {
        height: 500px;
        width: 500px;
        background-color: rgba(214, 177, 242, 0.7);
        border-radius: 50%;
        position: fixed;
        filter: blur(80px);
        z-index: 9;
        transition: all linear 0.4s;
    }
    #background-video {
        height: 100%;
        width: 100%;
        object-fit: cover;
        z-index: -1;
        position: fixed;
    }
    #nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: rgb(229, 226, 226);
        color: black;
        padding: 1rem 2rem;
        text-transform: uppercase;
        position: fixed;
        top: 0;
        width: 100%;
        height: 8vh;
        z-index: 11;
    }
    #nav_content {
        display: flex;
        justify-content: space-between;
        gap: 3rem;
    }
    #nav_content h3 {
        position: relative;
        cursor: pointer;
    }
    #nav_content h3::after {
        content: "";
        width: 0;
        height: 2px;
        background: #bc66fe;
        transition: width 0.3s;
        position: absolute;
        left: 0;
        bottom: -5px;
    }
    #nav_content h3:hover::after {
        width: 100%;
    }
    #main {
        min-height: 100vh;
        padding-top: 8vh;
        position: relative;
        background-color: rgba(0, 0, 0, 0.35);
        overflow: hidden;
        overflow-y: auto;
    }
    #page1 {
        height: 100vh;
        width: 100%;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        text-align: center;
        z-index: 10;
    }
    #page1 h1 {
        font-size: 7.5vw;
        font-weight: 900;
        position: relative;
    }
    #page1 h1::before {
        content: "FinVisor";
        position: absolute;
        color: #000;
        top: -5px;
        left: -5px;
        -webkit-text-stroke: 1.5px rgb(238, 236, 236);
        z-index: -1;
    }
    #page1 h2 {
        font-size: 35px;
        font-weight: 800;
        margin-top: 10px;
        margin-bottom: 90px;
        color: black;
    }
    #page1 p {
        color: white;
        font-size: 1.2vw;
        font-weight: 500;
        width: 40%;
    }
    #page2 {
        position: relative;
        height: 100vh;
        z-index: 10;
    }
    #page2 #features {
        background-color: #d6b1f2;
        height: 25vh;
        display: flex;
        border-radius: 20px;
        transform: translateX(8%);
        justify-content: space-around;
        align-items: center;
        font-weight: 900;
    }
    #page2 #features p {
        width: 40%;
        font-weight: 200;
        font-size: 1.5rem;
    }
    .features-container {
        display: flex;
        width: 80%;
        height: 65vh;
        margin: 200px auto;
    }
    .left-section {
        width: 20%;
        text-align: left;
        margin: 0 auto;
    }
    .left-section p {
        margin-bottom: 20px;
        font-size: 18px;
    }
    .info-box p {
        font-size: 33px;
        margin-bottom: 30px;
    }
    .see-more {
        color: #666;
        cursor: pointer;
    }
    .right-section {
        width: 75%;
    }
    .right-section h1 {
        font-size: 2.3rem;
        margin-bottom: 20px;
    }
    .description {
        font-size: 1.5rem;
        color: #666;
        margin-bottom: 60px;
    }
    .features-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
    }
    .feature-card {
        background-color: #f2f2f2;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease;
    }
    .feature-card:hover {
        background-color: #d6b1f2;
    }
    .feature-card h3 {
        font-size: 2rem;
        margin-bottom: 1.2rem;
    }
    .feature-card p {
        font-size: 1.2rem;
        color: #333;
    }

    /* New Styles for Transactions Table */
    .transactions-container {
        margin: 20px auto;
        width: 80%;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        background-color: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    th, td {
        padding: 15px;
        text-align: left;
    }

    th {
        background-color: #d6b1f2;
        color: white;
        text-transform: uppercase;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    tr:hover {
        background-color: #ddd;
    }

    .transaction-details {
        text-align: left;
    }

    .amount-cell {
        text-align: right;
        position: relative;
    }

    .amount {
        cursor: pointer;
        display: inline-block;
        padding: 5px 10px;
        border-radius: 8px;
    }

    .amount:hover {
        background-color: #ddd;
    }

    .circle {
        height: 10px;
        width: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 10px;
    }

    .circle.credit {
        background-color: green;
    }

    .circle.debit {
        background-color: red;
    }

    .draggable {
        background-color: #d6b1f2;
        padding: 5px;
        border-radius: 8px;
        cursor: grab;
        display: inline-block;
    }

    /* Back Button */
    .back-button {
        margin-top: 40px;
        padding: 10px 20px;
        height: 2.6rem;
        font-size: 0.8rem;
        background-color: #d6b1f2;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }

    .back-button:hover {
        background-color: #c29ae1;
    }

    /* For hidden transaction rows */
    .hidden-row {
        display: none;
    }

    .expanded {
        display: table-row;
    }

    .feature-section{
    padding-top:150px;
    text-align: center;
  }

  .chatbot-input-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
    }

    .chatbot-input-container h2 {
        font-size: 1.5rem;
        color: #333;
        margin-bottom: 20px;
    }

    .chatbot-input {
        width: 300px;
        padding: 10px;
        font-size: 1.2rem;
        border: 2px solid #bc66fe;
        border-radius: 8px;
        margin-bottom: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s ease;
    }

    .chatbot-input:focus {
        border-color: #5a4cad;
        outline: none;
    }

    .submit-query-button {
        background-color: #bc66fe;
        color: white;
        padding: 10px 20px;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease;
    }

    .submit-query-button:hover {
        background-color: #5a4cad;
    }

    .response-message {
        margin-top: 20px;
        background-color: rgba(214, 177, 242, 0.2);
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        width: 300px;
        text-align: center;
    }
    .response-message p {
        color: #333;
        font-size: 1.2rem;
    }

    h1, h2, p {
        color: #333;
        text-align: center;
    }

    .loading {
        font-size: 1.5rem;
        color: #666;
        display: none;
    }

    .loading-animation {
        border: 16px solid #f3f3f3;
        border-top: 16px solid #3498db;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        animation: spin 2s linear infinite;
        margin-bottom: 20px;
        position: relative;
        left: 47%;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .analysis {
    margin-top: 20px;
    display: none;
    text-align: center;
}


.stock-advice p {
    margin-bottom: 10px;
}

.stock-advice h3 {
    color: #444;
    font-size: 1.4rem;
    margin-top: 20px;
}

.stock-advice ul {
    margin: 10px 0;
    padding-left: 20px;
}

.stock-advice ul li {
    margin-bottom: 8px;
    font-size: 1.1rem;
    color: #555;
}

select {
    width: 300px;
    padding: 10px;
    margin: 20px auto;
    font-size: 1.2rem;
    display: block;
    border: 1px solid #ccc;
    border-radius: 5px;
}

#stock-analysis-result {
    max-width: 800px;
    margin: 0 auto;
}

.back-button {
    background-color: #bc66fe;
    color: white;
    padding: 10px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 20px;
}

.back-button:hover {
    background-color: #5a4cad;
}

    </style>
</body>
</html>
